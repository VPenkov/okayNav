/* jquery.okayNav.js 1.0.1
* Created by Vergil Penkov (http://vergilpenkov.com/), MIT license. */
!function(n,i,a,e){function o(e,o){this.options=n.extend({},v,o),_okayNav=this,_invisibleNavState=!1,_options=this.options,$document=n(a),$body=n("body"),$window=n(i),$navigation=n(e),""==this.options.parent?this.options.parent=$navigation.parent():"",_okayNav.init()}var t="okayNav",v={parent:"",toggle_icon_class:"okayNav__menu-toggle",toggle_icon_content:"<span /><span /><span />",beforeopen:function(){},open:function(){},beforeclose:function(){},close:function(){}};o.prototype={init:function(){_okayNav.setupElements($navigation),$nav_visible=$navigation.children(".okayNav__nav--visible"),$nav_invisible=$navigation.children(".okayNav__nav--invisible"),$nav_toggle_icon=$navigation.children("."+_options.toggle_icon_class),_nav_toggle_icon_width=$nav_toggle_icon.outerWidth(!0),_last_visible_child_width=0,_okayNav.initEvents()},setupElements:function(){$body.addClass("okayNav-loaded"),$navigation.addClass("okayNav loaded").children("ul").addClass("okayNav__nav--visible"),$navigation.append('<ul class="okayNav__nav--invisible" />').append('<a href="#" class="'+_options.toggle_icon_class+'">'+_options.toggle_icon_content+"</a>")},initEvents:function(){$document.on("click.okayNav","."+_options.toggle_icon_class,function(n){n.preventDefault(),_okayNav.toggleInvisibleNav()}),$document.on("click.okayNav",function(i){if(_invisibleNavState===!0){var a=n(i.target);a.parents().hasClass("okayNav")||_okayNav.closeInvisibleNav()}});var i=_okayNav.windowResize(function(){_okayNav.recalcNav()},50);$window.on("load.okayNav resize.okayNav",i)},getParent:function(){return _options.parent},getVisibleNav:function(){return $nav_visible},getInvisibleNav:function(){return $nav_invisible},getNavToggleIcon:function(){return $nav_toggle_icon},openInvisibleNav:function(){_options.beforeopen.call(),$nav_toggle_icon.addClass("icon--active"),$nav_invisible.addClass("nav-open"),_invisibleNavState=!0,_options.open.call(),$document.trigger("okayNav:open")},closeInvisibleNav:function(){_options.beforeclose.call(),$nav_toggle_icon.removeClass("icon--active"),$nav_invisible.removeClass("nav-open"),_invisibleNavState=!1,_options.close.call(),$document.trigger("okayNav:close")},toggleInvisibleNav:function(){_invisibleNavState?(_invisibleNavState=!1,_okayNav.closeInvisibleNav()):(_invisibleNavState=!0,_okayNav.openInvisibleNav())},windowResize:function(n,i,a){var e;return function(){var o=this,t=arguments,v=function(){e=null,a||n.apply(o,t)},l=a&&!e;clearTimeout(e),e=setTimeout(v,i),l&&n.apply(o,t)}},getParentWidth:function(i){var a=i||_options.parent,e=n(a).outerWidth(!0);return e},getChildrenWidth:function(i){var a=0;return n(i).children().each(function(){a+=n(this).outerWidth(!0)}),a},countNavItems:function(i){var a=n(i),e=n("li",a).length;return e},recalcNav:function(){var i=n(_options.parent).outerWidth(!0),a=$navigation.outerWidth(!0),e=_okayNav.countNavItems($nav_visible),o=$nav_visible.outerWidth(!0)+_nav_toggle_icon_width-1,t=_okayNav.getChildrenWidth(_options.parent)+_last_visible_child_width+_nav_toggle_icon_width-10;e>0&&o>=a&&_okayNav.collapseNavItem(),i>t&&_okayNav.expandNavItem(),0==n("li",$nav_invisible).length?$nav_toggle_icon.hide():$nav_toggle_icon.show()},collapseNavItem:function(){var i=n("li:last-child",$nav_visible);_last_visible_child_width=i.outerWidth(!0),i.detach().prependTo($nav_invisible),_okayNav.recalcNav(),$document.trigger("okayNav:collapseItem")},expandNavItem:function(){n("li:first-child",$nav_invisible).detach().appendTo($nav_visible),$document.trigger("okayNav:expandItem")},destroy:function(){n("li",$nav_invisible).appendTo($nav_visible),$nav_invisible.remove(),$nav_visible.removeClass("okayNav__nav--visible"),$nav_toggle_icon.remove(),$document.unbind(".okayNav"),n(i).unbind(".okayNav")}},n.fn[t]=function(i){var a=arguments;if(i===e||"object"==typeof i)return this.each(function(){n.data(this,"plugin_"+t)||n.data(this,"plugin_"+t,new o(this,i))});if("string"==typeof i&&"_"!==i[0]&&"init"!==i){var v;return this.each(function(){var e=n.data(this,"plugin_"+t);e instanceof o&&"function"==typeof e[i]&&(v=e[i].apply(e,Array.prototype.slice.call(a,1))),"destroy"===i&&n.data(this,"plugin_"+t,null)}),v!==e?v:this}}}(jQuery,window,document);
